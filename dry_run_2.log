
=== Step 1: Collection ===
Collecting articles from last 6 hours...
Fetching yahoo_finance_top from https://finance.yahoo.com/news/rssindex...
Fetching cnbc_world from https://www.cnbc.com/id/100727362/device/rss/rss.html...
Fetching scmp_china from https://www.scmp.com/rss/91/feed...
Fetching economictimes from https://economictimes.indiatimes.com/rssfeedsdefault.cms...
Fetching antara_news_biz from https://en.antaranews.com/rss/business-investment.xml...
Warning: Error parsing feed antara_news_biz: document declared as us-ascii, but parsed as iso-8859-1
Fetching yahoo_jp_business from https://news.yahoo.co.jp/rss/categories/business.xml...
Fetching coindesk from https://www.coindesk.com/arc/outboundfeeds/rss/...
Fetching bitcoin_magazine from https://bitcoinmagazine.com/.rss/full/...
Collected 101 articles.

=== Step 2: Scoring ===
Initializing Gemini with Vertex AI (Project: 231503280916, Location: global)
Scoring in batches of 10...
Early Exit Threshold configured: Stop if 2 high-score articles found.
[1-10/101] Processing batch...
  - Scored: Samsung Electronics estimates nearly thr... -> 92 pts
  - Scored: Venezuela says 100 killed in U.S. milita... -> 88 pts
  - Scored: CNBC Daily Open: Rumbles within the Magn... -> 75 pts
  - Scored: The first of Chinaâ€™s 'AI tigers' goes pu... -> 65 pts
  - Scored: Trumpâ€™s Greenland gambit puts China on e... -> 55 pts
  - Scored: Asia-Pacific markets mostly fall as Trum... -> 45 pts
  - Scored: European markets set to open lower as ge... -> 30 pts
  - Scored: The boldest bitcoin predictions for 2026... -> 20 pts
  - Scored: Vacations can be stressfulâ€”here are 3 wa... -> 0 pts
  - Scored: Women tattoo artists, history behind vir... -> 0 pts

ğŸš€ Early Exit: Found 2 candidate articles (Target >= 2). Stopping scoring.

Found 2 articles above threshold 85.

=== Step 3: Generation ===
Initializing clients for generation...
Fetching recent posts for deduplication check...
Loaded 30 existing post titles.
Generating article for: Samsung Electronics estimates nearly three-fold profit surge as memory prices skyrocket
Score: 92
Reason: åŠå°ä½“ãƒ¡ãƒ¢ãƒªã®ä¾¡æ ¼é«˜é¨°ã¨å–¶æ¥­åˆ©ç›Šã®æ€¥å¢—ï¼ˆ20å…†ã‚¦ã‚©ãƒ³ï¼‰ã¨ã„ã†æ¥µã‚ã¦å…·ä½“çš„ãªæ•°å€¤ãŒã‚ã‚Šã€å¸‚å ´ã®ã€åŠå°ä½“ã‚µã‚¤ã‚¯ãƒ«ã®åº•æ‰“ã¡ãƒ»ä¸Šæ˜‡ã€ã‚’è£ä»˜ã‘ã‚‹å¼·åŠ›ãªææ–™ã€‚é–¢é€£ã™ã‚‹ç±³å›½ãƒ»æ—¥æœ¬ãƒ»ã‚¢ã‚¸ã‚¢ã®åŠå°ä½“éŠ˜æŸ„å…¨ä½“ã¸ã®æ³¢åŠåŠ¹æœãŒå¤§ããã€æ•°é€±é–“ã®ãƒ­ãƒ³ã‚°ãƒã‚¸ã‚·ãƒ§ãƒ³æ§‹ç¯‰ã®æ ¹æ‹ ã¨ãªã‚‹ã€‚
Checking for duplicates...
No duplicate found. Proceeding...
Category: featured-news -> Type: featured-news

--- Context-based generation (URL reading + summarization) ---
Extracting content from cnbc_world: https://www.cnbc.com/2026/01/08/samsung-electronics-estimates-surge-skyrocket-profit-ai-memory-prices-q4.html
Successfully extracted: 2229 chars
Summarizing article: Samsung Electronics estimates nearly three-fold pr...
Summary: ã‚µãƒ ã‚¹ãƒ³é›»å­ã¯ç¬¬4å››åŠæœŸã®æ±ºç®—ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã‚’ç™ºè¡¨ã—ã€å–¶æ¥­åˆ©ç›ŠãŒå‰å¹´åŒæœŸæ¯”ç´„3å€ã®20å…†ã‚¦ã‚©ãƒ³ã«é”ã—ã€éå»æœ€é«˜ç›Šï¼ˆ2018å¹´ã®17.6å…†ã‚¦ã‚©ãƒ³ï¼‰ã‚’æ›´æ–°ã™ã‚‹è¦‹é€šã—ã‚’ç¤ºã—ãŸã€‚å£²ä¸Šé«˜ã¯ç´„93å…†ã‚¦ã‚©ãƒ³ã‚’è¦‹è¾¼ã‚€ã€‚èƒŒ...
Key facts: 6 items
Context created: 264 chars summary, 6 key facts
Starting article generation for keyword: Samsung Electronics estimates nearly three-fold profit surge as memory prices skyrocket (Type: featured-news)
Context-based generation mode
  Summary: ã‚µãƒ ã‚¹ãƒ³é›»å­ã¯ç¬¬4å››åŠæœŸã®æ±ºç®—ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã‚’ç™ºè¡¨ã—ã€å–¶æ¥­åˆ©ç›ŠãŒå‰å¹´åŒæœŸæ¯”ç´„3å€ã®20å…†ã‚¦ã‚©ãƒ³ã«é”ã—ã€éå»æœ€é«˜ç›Šï¼ˆ2018å¹´ã®17.6å…†ã‚¦ã‚©ãƒ³ï¼‰ã‚’æ›´æ–°ã™ã‚‹è¦‹é€šã—ã‚’ç¤ºã—ãŸã€‚å£²ä¸Šé«˜ã¯ç´„93å…†ã‚¦ã‚©ãƒ³ã‚’è¦‹è¾¼ã‚€ã€‚èƒŒ...
  Key facts: 6 items
--- Internal Link Suggester ---
Fetching popular posts for internal linking...
Found 20 popular posts.
Fetching last 30 recent posts...
Total candidates loaded: 40
Scoring candidate relevance with Gemini (Enhanced Context)...
Found 1 highly relevant articles.
Found 1 relevant articles for linking.
Generating content with Gemini...
Generating article for keyword: Samsung Electronics estimates nearly three-fold profit surge as memory prices skyrocket (Type: featured-news, Category: featured-news)
Generated Title: ã‚µãƒ ã‚¹ãƒ³å–¶æ¥­ç›Š3å€ãƒ»20å…†ã‚¦ã‚©ãƒ³ï¼šAIç‰¹éœ€ã§éå»æœ€é«˜ã¸
Content Length: 2948 chars
Generating SEO metadata...
Meta Description: ã‚µãƒ ã‚¹ãƒ³é›»å­ãŒAIç‰¹éœ€ã‚’å—ã‘ã€å–¶æ¥­åˆ©ç›ŠãŒå‰å¹´æ¯”3å€ã®20å…†ã‚¦ã‚©ãƒ³ã«é”ã™ã‚‹è¦‹é€šã—ã‚’ç™ºè¡¨ã€‚ãƒ¡ãƒ¢ãƒªä¾¡æ ¼é«˜é¨°ã‚’èƒŒæ™¯ã«éå»æœ€é«˜ç›Šã¸è¿«ã‚Šã¾ã™ãŒã€æŠ•è³‡å®¶ã«ã¨ã£ã¦é‡è¦ãªã®ã¯ä»Šå¾Œã®æ ªä¾¡ã§ã™ã€‚æœ¬è¨˜äº‹ã§ã¯å¸‚å ´ã®æœŸå¾…å€¤ã¨ã€Œææ–™å‡ºå°½ãã—ã€ã®ãƒªã‚¹ã‚¯ã‚’å†·é™ã«åˆ†æã€‚çŸ­æœŸçš„èª¿æ•´ã¨é•·æœŸçš„æˆé•·ã€ãã‚Œãã‚Œã®ã‚·ãƒŠãƒªã‚ªã‹ã‚‰ä»Šå¾Œã®æŠ•è³‡æˆ¦ç•¥ã‚’è©³ç´°ã«ç´è§£ãã¾ã™ã€‚
Original Title: ã‚µãƒ ã‚¹ãƒ³å–¶æ¥­ç›Š3å€ãƒ»20å…†ã‚¦ã‚©ãƒ³ï¼šAIç‰¹éœ€ã§éå»æœ€é«˜ã¸
Optimized Title: ã‚µãƒ ã‚¹ãƒ³å–¶æ¥­ç›Š3å€ãƒ»20å…†ã‚¦ã‚©ãƒ³ï¼šAIç‰¹éœ€ã§éå»æœ€é«˜ã¸
Generating hero image...
Traceback (most recent call last):
  File "/Users/matsumotoakira/Documents/Private_development/finshift/automation/pipeline.py", line 292, in <module>
    main()
    ~~~~^^
  File "/Users/matsumotoakira/Documents/Private_development/finshift/automation/pipeline.py", line 283, in main
    success = run_generation_task(task_args, gemini_client=gemini_client, wp_client=wp_client)
  File "/Users/matsumotoakira/Documents/Private_development/finshift/automation/generate_article.py", line 268, in run_generation_task
    image_prompt = gemini.generate_image_prompt(title, content_summary, args.type)
  File "/Users/matsumotoakira/Documents/Private_development/finshift/automation/gemini_client.py", line 508, in generate_image_prompt
    response = self._retry_request(
        self.client.models.generate_content,
        model='gemini-3-pro-preview',
        contents=prompt
    )
  File "/Users/matsumotoakira/Documents/Private_development/finshift/automation/gemini_client.py", line 50, in _retry_request
    return func(*args, **kwargs)
  File "/opt/homebrew/lib/python3.14/site-packages/google/genai/models.py", line 5203, in generate_content
    response = self._generate_content(
        model=model, contents=contents, config=parsed_config
    )
  File "/opt/homebrew/lib/python3.14/site-packages/google/genai/models.py", line 3985, in _generate_content
    response = self._api_client.request(
        'post', path, request_dict, http_options
    )
  File "/opt/homebrew/lib/python3.14/site-packages/google/genai/_api_client.py", line 1388, in request
    response = self._request(http_request, http_options, stream=False)
  File "/opt/homebrew/lib/python3.14/site-packages/google/genai/_api_client.py", line 1224, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.14/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
  File "/opt/homebrew/lib/python3.14/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
  File "/opt/homebrew/lib/python3.14/site-packages/tenacity/__init__.py", line 400, in <lambda>
    self._add_action_func(lambda rs: rs.outcome.result())
                                     ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0/Frameworks/Python.framework/Versions/3.14/lib/python3.14/concurrent/futures/_base.py", line 443, in result
    return self.__get_result()
           ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0/Frameworks/Python.framework/Versions/3.14/lib/python3.14/concurrent/futures/_base.py", line 395, in __get_result
    raise self._exception
  File "/opt/homebrew/lib/python3.14/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
  File "/opt/homebrew/lib/python3.14/site-packages/google/genai/_api_client.py", line 1194, in _request_once
    response = self._httpx_client.request(
        method=http_request.method,
    ...<3 lines>...
        timeout=http_request.timeout,
    )
  File "/opt/homebrew/lib/python3.14/site-packages/httpx/_client.py", line 825, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.14/site-packages/httpx/_client.py", line 914, in send
    response = self._send_handling_auth(
        request,
    ...<2 lines>...
        history=[],
    )
  File "/opt/homebrew/lib/python3.14/site-packages/httpx/_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
        request,
        follow_redirects=follow_redirects,
        history=history,
    )
  File "/opt/homebrew/lib/python3.14/site-packages/httpx/_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
  File "/opt/homebrew/lib/python3.14/site-packages/httpx/_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
  File "/opt/homebrew/lib/python3.14/site-packages/httpx/_transports/default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
  File "/opt/homebrew/lib/python3.14/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
    raise exc from None
  File "/opt/homebrew/lib/python3.14/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
        pool_request.request
    )
  File "/opt/homebrew/lib/python3.14/site-packages/httpcore/_sync/connection.py", line 103, in handle_request
    return self._connection.handle_request(request)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/opt/homebrew/lib/python3.14/site-packages/httpcore/_sync/http11.py", line 136, in handle_request
    raise exc
  File "/opt/homebrew/lib/python3.14/site-packages/httpcore/_sync/http11.py", line 106, in handle_request
    ) = self._receive_response_headers(**kwargs)
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/opt/homebrew/lib/python3.14/site-packages/httpcore/_sync/http11.py", line 177, in _receive_response_headers
    event = self._receive_event(timeout=timeout)
  File "/opt/homebrew/lib/python3.14/site-packages/httpcore/_sync/http11.py", line 217, in _receive_event
    data = self._network_stream.read(
        self.READ_NUM_BYTES, timeout=timeout
    )
  File "/opt/homebrew/lib/python3.14/site-packages/httpcore/_backends/sync.py", line 128, in read
    return self._sock.recv(max_bytes)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1285, in recv
    return self.read(buflen)
           ~~~~~~~~~^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.0/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1140, in read
    return self._sslobj.read(len)
           ~~~~~~~~~~~~~~~~~^^^^^
KeyboardInterrupt
